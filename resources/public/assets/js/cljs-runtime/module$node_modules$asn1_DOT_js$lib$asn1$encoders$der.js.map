{
"version":3,
"file":"module$node_modules$asn1_DOT_js$lib$asn1$encoders$der.js",
"lineCount":178,
"mappings":"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",
"sources":["node_modules/asn1_DOT_js/lib/asn1/encoders/der.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$asn1_DOT_js$lib$asn1$encoders$der\"] = function(global,require,module,exports) {\nvar inherits = require('inherits');\nvar Buffer = require('buffer').Buffer;\n\nvar asn1 = require('../../asn1');\nvar base = asn1.base;\n\n// Import DER constants\nvar der = asn1.constants.der;\n\nfunction DEREncoder(entity) {\n  this.enc = 'der';\n  this.name = entity.name;\n  this.entity = entity;\n\n  // Construct base tree\n  this.tree = new DERNode();\n  this.tree._init(entity.body);\n};\nmodule.exports = DEREncoder;\n\nDEREncoder.prototype.encode = function encode(data, reporter) {\n  return this.tree._encode(data, reporter).join();\n};\n\n// Tree methods\n\nfunction DERNode(parent) {\n  base.Node.call(this, 'der', parent);\n}\ninherits(DERNode, base.Node);\n\nDERNode.prototype._encodeComposite = function encodeComposite(tag,\n                                                              primitive,\n                                                              cls,\n                                                              content) {\n  var encodedTag = encodeTag(tag, primitive, cls, this.reporter);\n\n  // Short form\n  if (content.length < 0x80) {\n    var header = new Buffer(2);\n    header[0] = encodedTag;\n    header[1] = content.length;\n    return this._createEncoderBuffer([ header, content ]);\n  }\n\n  // Long form\n  // Count octets required to store length\n  var lenOctets = 1;\n  for (var i = content.length; i >= 0x100; i >>= 8)\n    lenOctets++;\n\n  var header = new Buffer(1 + 1 + lenOctets);\n  header[0] = encodedTag;\n  header[1] = 0x80 | lenOctets;\n\n  for (var i = 1 + lenOctets, j = content.length; j > 0; i--, j >>= 8)\n    header[i] = j & 0xff;\n\n  return this._createEncoderBuffer([ header, content ]);\n};\n\nDERNode.prototype._encodeStr = function encodeStr(str, tag) {\n  if (tag === 'bitstr') {\n    return this._createEncoderBuffer([ str.unused | 0, str.data ]);\n  } else if (tag === 'bmpstr') {\n    var buf = new Buffer(str.length * 2);\n    for (var i = 0; i < str.length; i++) {\n      buf.writeUInt16BE(str.charCodeAt(i), i * 2);\n    }\n    return this._createEncoderBuffer(buf);\n  } else if (tag === 'numstr') {\n    if (!this._isNumstr(str)) {\n      return this.reporter.error('Encoding of string type: numstr supports ' +\n                                 'only digits and space');\n    }\n    return this._createEncoderBuffer(str);\n  } else if (tag === 'printstr') {\n    if (!this._isPrintstr(str)) {\n      return this.reporter.error('Encoding of string type: printstr supports ' +\n                                 'only latin upper and lower case letters, ' +\n                                 'digits, space, apostrophe, left and rigth ' +\n                                 'parenthesis, plus sign, comma, hyphen, ' +\n                                 'dot, slash, colon, equal sign, ' +\n                                 'question mark');\n    }\n    return this._createEncoderBuffer(str);\n  } else if (/str$/.test(tag)) {\n    return this._createEncoderBuffer(str);\n  } else if (tag === 'objDesc') {\n    return this._createEncoderBuffer(str);\n  } else {\n    return this.reporter.error('Encoding of string type: ' + tag +\n                               ' unsupported');\n  }\n};\n\nDERNode.prototype._encodeObjid = function encodeObjid(id, values, relative) {\n  if (typeof id === 'string') {\n    if (!values)\n      return this.reporter.error('string objid given, but no values map found');\n    if (!values.hasOwnProperty(id))\n      return this.reporter.error('objid not found in values map');\n    id = values[id].split(/[\\s\\.]+/g);\n    for (var i = 0; i < id.length; i++)\n      id[i] |= 0;\n  } else if (Array.isArray(id)) {\n    id = id.slice();\n    for (var i = 0; i < id.length; i++)\n      id[i] |= 0;\n  }\n\n  if (!Array.isArray(id)) {\n    return this.reporter.error('objid() should be either array or string, ' +\n                               'got: ' + JSON.stringify(id));\n  }\n\n  if (!relative) {\n    if (id[1] >= 40)\n      return this.reporter.error('Second objid identifier OOB');\n    id.splice(0, 2, id[0] * 40 + id[1]);\n  }\n\n  // Count number of octets\n  var size = 0;\n  for (var i = 0; i < id.length; i++) {\n    var ident = id[i];\n    for (size++; ident >= 0x80; ident >>= 7)\n      size++;\n  }\n\n  var objid = new Buffer(size);\n  var offset = objid.length - 1;\n  for (var i = id.length - 1; i >= 0; i--) {\n    var ident = id[i];\n    objid[offset--] = ident & 0x7f;\n    while ((ident >>= 7) > 0)\n      objid[offset--] = 0x80 | (ident & 0x7f);\n  }\n\n  return this._createEncoderBuffer(objid);\n};\n\nfunction two(num) {\n  if (num < 10)\n    return '0' + num;\n  else\n    return num;\n}\n\nDERNode.prototype._encodeTime = function encodeTime(time, tag) {\n  var str;\n  var date = new Date(time);\n\n  if (tag === 'gentime') {\n    str = [\n      two(date.getFullYear()),\n      two(date.getUTCMonth() + 1),\n      two(date.getUTCDate()),\n      two(date.getUTCHours()),\n      two(date.getUTCMinutes()),\n      two(date.getUTCSeconds()),\n      'Z'\n    ].join('');\n  } else if (tag === 'utctime') {\n    str = [\n      two(date.getFullYear() % 100),\n      two(date.getUTCMonth() + 1),\n      two(date.getUTCDate()),\n      two(date.getUTCHours()),\n      two(date.getUTCMinutes()),\n      two(date.getUTCSeconds()),\n      'Z'\n    ].join('');\n  } else {\n    this.reporter.error('Encoding ' + tag + ' time is not supported yet');\n  }\n\n  return this._encodeStr(str, 'octstr');\n};\n\nDERNode.prototype._encodeNull = function encodeNull() {\n  return this._createEncoderBuffer('');\n};\n\nDERNode.prototype._encodeInt = function encodeInt(num, values) {\n  if (typeof num === 'string') {\n    if (!values)\n      return this.reporter.error('String int or enum given, but no values map');\n    if (!values.hasOwnProperty(num)) {\n      return this.reporter.error('Values map doesn\\'t contain: ' +\n                                 JSON.stringify(num));\n    }\n    num = values[num];\n  }\n\n  // Bignum, assume big endian\n  if (typeof num !== 'number' && !Buffer.isBuffer(num)) {\n    var numArray = num.toArray();\n    if (!num.sign && numArray[0] & 0x80) {\n      numArray.unshift(0);\n    }\n    num = new Buffer(numArray);\n  }\n\n  if (Buffer.isBuffer(num)) {\n    var size = num.length;\n    if (num.length === 0)\n      size++;\n\n    var out = new Buffer(size);\n    num.copy(out);\n    if (num.length === 0)\n      out[0] = 0\n    return this._createEncoderBuffer(out);\n  }\n\n  if (num < 0x80)\n    return this._createEncoderBuffer(num);\n\n  if (num < 0x100)\n    return this._createEncoderBuffer([0, num]);\n\n  var size = 1;\n  for (var i = num; i >= 0x100; i >>= 8)\n    size++;\n\n  var out = new Array(size);\n  for (var i = out.length - 1; i >= 0; i--) {\n    out[i] = num & 0xff;\n    num >>= 8;\n  }\n  if(out[0] & 0x80) {\n    out.unshift(0);\n  }\n\n  return this._createEncoderBuffer(new Buffer(out));\n};\n\nDERNode.prototype._encodeBool = function encodeBool(value) {\n  return this._createEncoderBuffer(value ? 0xff : 0);\n};\n\nDERNode.prototype._use = function use(entity, obj) {\n  if (typeof entity === 'function')\n    entity = entity(obj);\n  return entity._getEncoder('der').tree;\n};\n\nDERNode.prototype._skipDefault = function skipDefault(dataBuffer, reporter, parent) {\n  var state = this._baseState;\n  var i;\n  if (state['default'] === null)\n    return false;\n\n  var data = dataBuffer.join();\n  if (state.defaultBuffer === undefined)\n    state.defaultBuffer = this._encodeValue(state['default'], reporter, parent).join();\n\n  if (data.length !== state.defaultBuffer.length)\n    return false;\n\n  for (i=0; i < data.length; i++)\n    if (data[i] !== state.defaultBuffer[i])\n      return false;\n\n  return true;\n};\n\n// Utility methods\n\nfunction encodeTag(tag, primitive, cls, reporter) {\n  var res;\n\n  if (tag === 'seqof')\n    tag = 'seq';\n  else if (tag === 'setof')\n    tag = 'set';\n\n  if (der.tagByName.hasOwnProperty(tag))\n    res = der.tagByName[tag];\n  else if (typeof tag === 'number' && (tag | 0) === tag)\n    res = tag;\n  else\n    return reporter.error('Unknown tag: ' + tag);\n\n  if (res >= 0x1f)\n    return reporter.error('Multi-octet tag encoding unsupported');\n\n  if (!primitive)\n    res |= 0x20;\n\n  res |= (der.tagClassByName[cls || 'universal'] << 6);\n\n  return res;\n}\n\n};"],
"names":["shadow$provide","global","require","module","exports","DEREncoder","entity","enc","name","tree","DERNode","_init","body","parent","base","Node","call","two","num","inherits","Buffer","asn1","der","constants","prototype","encode","DEREncoder.prototype.encode","data","reporter","_encode","join","_encodeComposite","DERNode.prototype._encodeComposite","tag","primitive","cls","content","tagByName","hasOwnProperty","res","error","tagClassByName","length","header","encodedTag","_createEncoderBuffer","lenOctets","i","j","_encodeStr","DERNode.prototype._encodeStr","str","unused","buf","writeUInt16BE","charCodeAt","_isNumstr","_isPrintstr","test","_encodeObjid","DERNode.prototype._encodeObjid","id","values","relative","split","Array","isArray","slice","JSON","stringify","splice","size","ident","objid","offset","_encodeTime","DERNode.prototype._encodeTime","time","date","Date","getFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","_encodeNull","DERNode.prototype._encodeNull","_encodeInt","DERNode.prototype._encodeInt","isBuffer","numArray","toArray","sign","unshift","out","copy","_encodeBool","DERNode.prototype._encodeBool","value","_use","DERNode.prototype._use","obj","_getEncoder","_skipDefault","DERNode.prototype._skipDefault","dataBuffer","state","_baseState","undefined","defaultBuffer","_encodeValue"]
}
