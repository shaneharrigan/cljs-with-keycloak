{"version":3,"sources":["frontend/core.cljs"],"mappings":";;;AAQA,gCAAA,WAAA,eAAA,qCAAA,/FAAKA;AAML,AAAKC,mBAAG,6CAAA,7CAACC;AAET,oCAAA,pCAAMC;AAAN,AACE,IAAA,AACE,oFAAA,pFAACG,mDAAML,iBAAGM,0EAAc,KAAAC,8CAAMR;;AAC9B,4HAAA,mBAAA,9IAAM,AAAA,wFAAA,AAAAI,gBAAUH;AAAhB,AAAqC,IAAAQ,eAAC,AAAA,0FAAA,AAAAL,gBAAWH;AAAZ,AAAA,QAAAQ,6CAAAA,2CAAA,QAAAA,uBAAA;;;AAErC,4RAAA,5RAAO,gIAAA,YAAA,5IAAO,AAAA,wFAAA,AAAAL,gBAAUH,8EACmC,4DAAA,fAAK,AAAQS;AADxE,AACiH,OAAA,0FAAA,AAAAN,gBAAWH;;;AAL9H,OAAAG,gBAMGH;gBANH,GAAA,CAAAI,kBAOSM;AAPT,QAAAN,JAOkBO;AAPlB,AAQI,qBAAA,dAACC,6CAAgDD;;AARrD,AAAA,MAAAP;;;;AAWF,AAAA;AAAA,oBAAA,iBAAAS,WAAA,mCAAAC,qBAAAC,xGAAOK;AAAP,AAAA,IAAAJ,aAAA,mFAAA,AAAAC,8BAAAH,sBAAAC;AAAA,AAAA;AACE,IAAAM,aAAwB,sBAAA,tBAACI;YAAzB,AAAAH,4CAAAD,WAAA,IAAA,nEAAOE;gBAAP,AAAAD,4CAAAD,WAAA,IAAA,vEAAaG;AAAb,AACE,oFAAA,pFAACnB,mDAAML,iBAAGM,4EAAekB;;AAsJtB,IAAAW,WAAA;wDApJD,kBAAIZ,tEAoJHa,WAAA,iBAAAC,WAAA,EAAA,oCAAA,iBAAAC,WAAA;IAAAC,WAAA,iBAAAC,WAAA,EAAA,YAAA,gBAAA,UAAA;AApJ2D,OAAS,AAAA,wFAAA,AAAArC,gBAAUH,/GAoJ9E;GAAA,WAAA;AAAA,AAAAwC;;AAAA,AAAA,QAAAN,+CAAAA,6CAAAI,SAAAC,YAAAL,yBAAAI,SAAAC;KAAA,iBAAAE,WAAA;IAAAC,WAAA,iBAAAC,WAAA,EAAA,YAAA,iBAAA,UAAA;AApJmJ,OAAQ,AAAA,wFAAA,AAAAxC,gBAAUH,/GAoJrK;GAAA,WAAA;AAAA,AAAA2C;;AAAA,AAAA,QAAAT,+CAAAA,6CAAAO,SAAAC,YAAAR,yBAAAO,SAAAC;;AAAA,AAAAL;;AAAA,AAAA,QAAAH,+CAAAA,6CAAAC,SAAAC,YAAAF,yBAAAC,SAAAC;;AAxJP,AAAA,GAAA,AAAAlB;AAAA,IAAAC,WAAAN;AAAA,AAAA,CAAA,AAAAM,uBAAA;;AAAAA;;AAAAN;;;;AAAA;AAAA;AAAOO,AAQP,qBAAA,rBAAeM;AAAf,AACE,IAAMC,OAAK,AAACC,gDAAgB,wBAAA,xBAACC;IACvBC,oBAAkB,AAAC5B;AADzB,AAEE,OAASyB,wCAAQP,5BAoCd,iBAAAY;IAAAC,WAAA;AAAA,AAAA,QAAAC,+CAAAA,6CAAAF,SAAAC,YAAAC,yBAAAF,SAAAC;;;;AAlCP,sBAAA,tBAAuBF;AAAvB,AACE,OAACL","names":["frontend.core/keycloak-config","frontend.core/kc","cljs.core.atom","frontend.core/initialize-keycloak","cljs.core/deref","e46682","cljs.core.swap_BANG_","cljs.core/assoc","js/module$node_modules$keycloak_js$dist$keycloak","fexpr__46683","js/location","js/Error","e","js/console.error","G__46685","props__44639__auto__","maybe-ref__44640__auto__","vec__46686","helix.core/extract-cljs-props","goog/DEBUG","G__46704","frontend.core/app","vec__46689","cljs.core.nth","state","set-state","helix.hooks/use-state","frontend.core/init","root","js/module$node_modules$react_dom$client.createRoot","js/document.getElementById","keycloak-instance","frontend.core/start","G__46705","G__46706","helix.core/jsx","G__46692","G__46693","obj46695","G__46696","G__46697","obj46699","G__46700","G__46701","obj46703"],"sourcesContent":["(ns frontend.core\n  (:require [helix.core :refer [defnc $]]\n            [helix.hooks :as hooks]\n            [helix.dom :as d]\n            [\"keycloak-js\" :as kjs]\n            [\"react-dom/client\" :as rdom]))\n\n;; Define Keycloak configuration\n(def keycloak-config\n  #js {:realm \"SMDH\"\n       :url \"http://localhost:8080\"\n       :clientId \"VMP-Frontend\"})\n\n;; Initialize Keycloak\n(def kc (atom nil)) ;; Define atom to hold Keycloak instance\n\n(defn initialize-keycloak []\n  (try\n    (swap! kc assoc :client (kjs. keycloak-config))\n    (aset (:client @kc) \"onAuthSuccess\" #((:statefn @kc) true))\n\n    (.then (.init (:client @kc) #js{:onLoad \"check-sso\"\n                                    :silentCheckSsoRedirectUri (str (.-href js/location) \"silent-check-sso.html\")}) #(:statefn @kc))\n    @kc\n    (catch js/Error e\n      (js/console.error \"Error initializing Keycloak:\" e))))\n\n\n(defnc app []\n  (let [[state set-state] (hooks/use-state false)]\n    (swap! kc assoc :statefn set-state)\n    (d/div\n      (if state (d/button {:class-name \"btn btn-error\" :on-click #(.logout (:client @kc))} \"logout!!\") (d/button {:class-name \"btn btn-accent\" :on-click #(.login (:client @kc))} \"Sign in\"))\n      )))\n\n;; Start your app with your favorite React renderer\n(defn ^:export init []\n  (let [root (rdom/createRoot (js/document.getElementById \"app\"))\n        keycloak-instance (initialize-keycloak)]\n    (.render root ($ app))))\n\n(defn ^:dev/after-load start []\n  (init))\n"]}