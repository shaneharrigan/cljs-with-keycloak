{"version":3,"sources":["cider/nrepl/inlined/deps/suitable/v0v6v2/suitable/js_introspection.cljs"],"mappings":"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","names":["cider.nrepl.inlined.deps.suitable.v0v6v2.suitable.js-introspection/own-property-descriptors","js/Object","obj","js/Object.getOwnPropertyDescriptors","js/Object.getOwnPropertyNames","cljs.core.map","key","js/Object.getOwnPropertyDescriptor","cljs.core.into","cljs.core/clj->js","cider.nrepl.inlined.deps.suitable.v0v6v2.suitable.js-introspection/properties-by-prototype","protos","js/Object.getPrototypeOf","cljs.core.conj","var_args","G__45221","cider.nrepl.inlined.deps.suitable.v0v6v2.suitable.js-introspection/property-names-and-types","js/Error","js-obj","cider.nrepl.inlined.deps.suitable.v0v6v2.suitable.js_introspection.property_names_and_types","prefix","seen","cljs.core/volatile!","iter__5520__auto__","s__45223","cljs.core/LazySeq","temp__5811__auto__","cljs.core/seq","xs__6369__auto__","vec__45228","cljs.core/first","cljs.core.nth","map__45231","cljs.core/--destructure-map","cljs.core.get","iterys__5516__auto__","s__45225","cljs.core/chunked-seq?","c__5518__auto__","size__5519__auto__","cljs.core/count","b__45227","cljs.core/chunk-buffer","i__45226","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__45224","cljs.core/chunk-rest","cljs.core/cons","cljs.core/rest","fs__5517__auto__","cljs.core.concat","iter__45222","i","_obj","props","cljs.core.map_indexed","cljs.core/vector","cljs.core/js-keys","and__5041__auto__","cljs.core/not","cljs.core/deref","or__5043__auto__","cljs.core._EQ_","js/Object.prototype.toString.call","js/Array.isArray","cider.nrepl.inlined.deps.suitable.v0v6v2.suitable.js_introspection.goog$module$goog$object.get","cljs.core/empty?","clojure.string/starts-with?","prop","e45232","e45233","temp__5809__auto__","value","cljs.core.apply","cljs.core/fn?","_e","cljs.core/chunk-first"],"sourcesContent":["(ns ^{:mranderson/inlined true} cider.nrepl.inlined.deps.suitable.v0v6v2.suitable.js-introspection\n  (:require [clojure.string :refer [starts-with?]]\n            [goog.object :refer [get] :rename {get oget}]))\n\n(def own-property-descriptors\n  (if (js-in \"getOwnPropertyDescriptors\" js/Object)\n    ;; ES 6+ version\n    (fn [obj] (js/Object.getOwnPropertyDescriptors obj))\n    ;; ES 5.1 version\n    (fn [obj] (->> obj\n                   js/Object.getOwnPropertyNames\n                   (map (fn [key] [key (js/Object.getOwnPropertyDescriptor obj key)]))\n                   (into {})\n                   clj->js))))\n\n(defn properties-by-prototype [obj]\n  (loop [obj obj protos []]\n    (if obj\n      (recur\n       (js/Object.getPrototypeOf obj)\n       (conj protos {:obj obj :props (own-property-descriptors obj)}))\n      protos)))\n\n(defn property-names-and-types\n  ([js-obj] (property-names-and-types js-obj nil))\n  ([js-obj prefix]\n   (let [seen (volatile! #{})]\n     (for [[i {:keys [_obj props]}] (map-indexed vector (properties-by-prototype js-obj))\n           key (js-keys props)\n           :when (and (not (get @seen key))\n                      (if (or (= \"[object String]\" (js/Object.prototype.toString.call js-obj))\n                              (js/Array.isArray js-obj))\n                        (not (oget (oget props key) \"enumerable\"))\n                        true)\n                      (or (empty? prefix)\n                          (starts-with? key prefix)))]\n       (let [prop (oget props key)]\n         (vswap! seen conj key)\n         {:name key\n          :hierarchy i\n          :type (try\n                  (if-let [value (or (oget prop \"value\")\n                                     (-> prop (oget \"get\")\n                                         (apply [])))]\n                    (if (fn? value) \"function\" \"var\")\n                    \"var\")\n                  (catch js/Error _e \"var\"))})))))\n\n(comment\n  (require '[cljs.pprint :refer [pprint]])\n  ;; (-> js/console property-names-and-types pprint)\n  (-> js/document.body property-names-and-types pprint)\n\n  (let [obj (new (fn [x] (this-as this (goog.object/set this \"foo\" 23))))]\n    (pprint (property-names-and-types obj)))\n\n  (oget js/console \"log\")\n  (-> js/console property-names-and-types pprint)\n  (-> js/window property-names-and-types pprint))\n"],"x_google_ignoreList":[0]}